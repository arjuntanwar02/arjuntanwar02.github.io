<!DOCTYPE HTML>
<html>
<head>
	<title>Live Tracking | Tanwar Thesis</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<link rel="stylesheet" href="assets/css/main.css" />
	<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
</head>
<body class="is-preload">

	<div id="wrapper">

		<!-- Header -->
		<header id="header">
			<a href="index.html" class="logo">Tanwar Thesis</a>
		</header>

		<!-- Navigation -->
		<nav id="nav">
			<ul class="links">
				<li><a href="index.html">Home</a></li>
				<li><a href="macro.html">Macro</a></li>
				<li><a href="equities.html">Equities</a></li>
				<li><a href="watchlist.html">Watchlist</a></li>
				<li class="active"><a href="tracking.html">Live Tracking</a></li>
				<li><a href="about.html">About</a></li>
			</ul>
		</nav>

<!-- Main -->
<div id="main">

	<section class="post">

	<h2>Live Portfolio Tracking</h2>

	<!-- Portfolio Totals -->
	<div style="background:#111; padding:20px; margin-bottom:25px; border-radius:8px;">
		<h3>Total Portfolio Value</h3>
		<h2 id="totalValue">$0.00</h2>
		<p>
			Gain/Loss:
			<span id="totalGain">$0.00</span>
			(<span id="totalPercent">0%</span>)
		</p>
	</div>

	<div style="display:flex; gap:30px;">

		<!-- Stock List -->
		<div style="width:30%;">
			<h3>Tracked Stocks</h3>
			<ul id="stockList" style="list-style:none; padding:0;"></ul>
		</div>

		<!-- Chart + Details -->
		<div style="width:70%;">
			<div id="chart-wrapper">
				<div id="tv-chart"></div>
			</div>

			<div id="stockDetails" style="margin-top:20px;"></div>
		</div>

	</div>

</section>


</div>

			
		<script src="https://s3.tradingview.com/tv.js"></script>

<script>
const shares = 10;

const stocks = [
	{
		ticker: "NASDAQ:NVDA",
		name: "NVIDIA",
		dateAdded: "2026-02-13",
		entryPrice: 720
	},
	{
		ticker: "NASDAQ:MSFT",
		name: "Microsoft",
		dateAdded: "2026-02-10",
		entryPrice: 410
	}
];

let portfolioEntryTotal = 0;

function init() {
	renderStockList();
	selectStock(0);
}

function renderStockList() {
	const list = document.getElementById("stockList");
	list.innerHTML = "";
	portfolioEntryTotal = 0;

	stocks.forEach((stock, index) => {
		const entryTotal = stock.entryPrice * shares;
		portfolioEntryTotal += entryTotal;

		const li = document.createElement("li");
		li.style.padding = "10px";
		li.style.cursor = "pointer";
		li.style.borderBottom = "1px solid #222";
		li.innerHTML = `
			<strong>${stock.name}</strong>
			| Added: ${stock.dateAdded}
			| Entry: $${stock.entryPrice}
		`;

		li.onclick = () => selectStock(index);
		list.appendChild(li);
	});
}

function selectStock(index) {
	const stock = stocks[index];

	document.getElementById("tv-chart").innerHTML = "";

	new TradingView.widget({
		container_id: "tv-chart",
		width: "100%",
		height: 450,
		symbol: stock.ticker,
		interval: "D",
		timezone: "America/New_York",
		theme: "dark",
		style: "1",
		locale: "en",
		toolbar_bg: "#1f1f1f",
		enable_publishing: false,
		allow_symbol_change: false
	});

	// MOCK live pricing (replace later with API)
	const currentPrice = stock.entryPrice * 1.05;

	const entryTotal = stock.entryPrice * shares;
	const currentTotal = currentPrice * shares;

	const gain = currentTotal - entryTotal;
	const percent = ((gain / entryTotal) * 100).toFixed(2);

	document.getElementById("stockDetails").innerHTML = `
		Entry Total (10 shares): $${entryTotal.toFixed(2)} <br>
		Estimated Current Value: $${currentTotal.toFixed(2)} <br>
		Gain/Loss: $${gain.toFixed(2)} (${percent}%)
	`;

	updatePortfolioTotals();
}

function updatePortfolioTotals() {
	const portfolioCurrentTotal = portfolioEntryTotal * 1.05;
	const totalGain = portfolioCurrentTotal - portfolioEntryTotal;
	const totalPercent = ((totalGain / portfolioEntryTotal) * 100).toFixed(2);

	document.getElementById("totalValue").innerText =
		"$" + portfolioCurrentTotal.toFixed(2);

	document.getElementById("totalGain").innerText =
		"$" + totalGain.toFixed(2);

	document.getElementById("totalPercent").innerText =
		totalPercent + "%";
}

window.onload = init;
</script>
	<style>
#chart-wrapper iframe {
	position: relative !important;
	z-index: 1 !important;
}
</style>
	
</body>
</html>
